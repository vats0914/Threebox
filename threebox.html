<!-- <!doctype html>
<head>
	<title>Line Example</title>
	<script src="./threebox.js" type="text/javascript"></script>
	<link src="./threebox.css" rel="stylesheet" />
	<script src="config.js"></script>
	<link href="https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.css" rel="stylesheet">
	<script src="https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.js"></script>
	<style>
		body, html {
			width: 100%;
			height: 100%;
			margin: 0;
			background: black;
		}

		#map {
			width: 100%;
			height: 100%;
		}
	</style>
</head>
<body>
	<div id='map' class='map'></div>

	<script type="module">
	

let mapBoxGLMap = null;
var tb = new Threebox(mapBoxGLMap)
function mapBoxGLMapInit() {
    mapboxgl.accessToken = 'pk.eyJ1IjoidnRzbCIsImEiOiJjbGRsaGZoaG0wMXJ4M29udzdrMGZnZWlxIn0.UvCR8AGz6Go4hXJty00x-A';
    mapBoxGLMap = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/satellite-streets-v11',
        projection: 'globe', // Display the map as a globe, since satellite-v9 defaults to Mercator
        zoom: 2,
        center: [0, 0],
        antialias: true
    });
}
const lines=[[0,0],[78,17]]
const elevation =[29 , 100]
function renderAircraftAnalyticsMapBoxGLMap() {
    // mapBoxGLMap.on('style.load', () => {
    //     mapBoxGLMap.addSource('mapbox-dem', {
    //         'type': 'raster-dem',
    //         'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',
    //         'tileSize': 512,
    //         'maxzoom': 14
    //     });
    //     // add the terrain layer with exaggerated height
    //     mapBoxGLMap.setTerrain({'source': 'mapbox-dem', 'exaggeration': 15});
    // });
    // const coordinates = [];
    // if (fleetData.actualRoute && fleetData.actualRoute.length > 0) {
    //     fleetData.actualRoute.forEach(position => {
    //         coordinates.push([position.longitude, position.latitude])
    //     })
    // }
    // mapBoxGLMap.on('load', () => {
    //     window.tb = new Threebox(
    //         mapBoxGLMap,
    //         mapBoxGLMap.getCanvas().getContext('webgl'),
    //         {
    //             defaultLights: true,
    //             realSunlight: true,
    //             terrain: true
    //         }
    //     );
    //     mapBoxGLMap.addLayer({
    //         id: 'custom_layer',
    //         type: 'custom',
    //         renderingMode: '3d',
    //         onAdd: function (map, mbxContext) {
    //             const lineOptions = {
    //                 geometry: checkAntimeridianCrossing(coordinates),
    //                 color: '#FF00FF',
    //                 width: 10
    //             }
    //             const lineMesh = tb.line(lineOptions);
    //             tb.add(lineMesh)
    //             console.log(mapBoxGLMap.getStyle().layers)
    //         },
    //         render: function (gl, matrix) {
    //             tb.update();
    //         }
    //     });
    //     console.log(mapBoxGLMap.getStyle().layers)
    // })
	// var lines = coords;
	// var arcSegments = 25;
	// var lineQuantity = 50;
	mapBoxGLMap.on('load', function() {

		mapBoxGLMap.addLayer({
	id: 'custom_layer',
	type: 'custom',
	renderingMode: '3d',
	onAdd: function(map, mbxContext){

		tb = new Threebox(
			map, 
			mbxContext,
			{defaultLights: true}
		);

		for (line of lines) {
			var lineOptions = {
				geometry: line,
				color: (line[1][1]/180) * 0xffffff, 
				width: 5	 
			}

			lineMesh = tb.line(lineOptions);

			tb.add(lineMesh)
		}

	},
	
	render: function(gl, matrix){
			tb.update();
	}
});
});
}
function convertCoordinatesForAntimeridianCrossing(coordinates) {
    if (Math.abs(coordinates[1][0] - coordinates[0][0]) >= 180) {
        const startLng = coordinates[0][0];
        const endLng = coordinates[1][0];
        if (endLng - startLng >= 180) {
            coordinates[1][0] -= 360;
        } else if (endLng - startLng < 180) {
            coordinates[1][0] += 360;
        }
    }
}
function checkAntimeridianCrossing(coordinates) {
    for (let i = 0; i < coordinates.length - 1; i++) {
        convertCoordinatesForAntimeridianCrossing([coordinates[i], coordinates[i + 1]])
    }
    return coordinates
}
mapBoxGLMapInit()
renderAircraftAnalyticsMapBoxGLMap()

	</script>
</body>
</html> -->
<!doctype html>
<head>
	<title>Line Example</title>
	<script src="./threebox.js" type="text/javascript"></script>
	<script src="config.js"></script>

	<script src='https://api.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>
	<link href='https://api.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />
	<style>
			body, html { 
				width: 100%;
				height: 100%;
				margin: 0;
				background:black;
			}
			#map { 
				width: 100%;
				height: 100%;
			}
	</style>
</head>
<body>
	<div id='map' class='map'></div>

	<script>


		// this demo generates lineGeometry for 50 lines, and adds them as lines to the map with random widths, and colors based on latitudes of their unique endpoints

		if(!config) console.error("Config not set! Make a copy of 'config_template.js', add in your access token, and save the file as 'config.js'.");
		
		mapboxgl.accessToken = config.accessToken;

		const map = new mapboxgl.Map({
			container: 'map',
			style: 'mapbox://styles/mapbox/satellite-streets-v12',
			projection: 'globe', // Display the map as a globe, since satellite-v9 defaults to Mercator
			zoom: 1.5,
			center: [-90, 40]
		});
 

		// randomly generate some line arcs (not essential for understanding this demo)
		
		var line = [
    [
        -122.617,
        47.6707,
        5151.12
    ],
    [
        -122.763,
        47.7068,
        5859.780000000001
    ],
    [
        -122.912,
        47.7436,
        6530.34
    ],
    [
        -123.068,
        47.7815,
        7063.740000000001
    ],
    [
        -123.231,
        47.8211,
        7642.860000000001
    ],
    [
        -123.394,
        47.8605,
        8282.94
    ],
    [
        -123.556,
        47.9097,
        8869.68
    ],
    [
        -123.708,
        47.9662,
        9380.220000000001
    ],
    [
        -123.863,
        48.0249,
        9806.94
    ],
    [
        -124.003,
        48.1054,
        10233.66
    ],
    [
        -124.135,
        48.1862,
        10782.300000000001
    ],
    [
        -124.267,
        48.2665,
        11056.62
    ],
    [
        -124.403,
        48.3489,
        11346.18
    ],
    [
        -124.541,
        48.4321,
        11666.220000000001
    ],
    [
        -124.676,
        48.5132,
        11932.92
    ],
    [
        -124.814,
        48.5953,
        12146.28
    ],
    [
        -124.954,
        48.6785,
        12192
    ],
    [
        -125.095,
        48.7622,
        12192
    ],
    [
        -125.245,
        48.8498,
        12192
    ],
    [
        -125.397,
        48.9388,
        12192
    ],
    [
        -125.554,
        49.0296,
        12192
    ],
    [
        -125.865,
        49.2084,
        12192
    ],
    [
        -126.017,
        49.2952,
        12192
    ],
    [
        -126.173,
        49.3837,
        12192
    ],
    [
        -126.491,
        49.5623,
        12192
    ],
    [
        -126.807,
        49.7374,
        12192
    ],
    [
        -126.972,
        49.828,
        12192
    ],
    [
        -127.301,
        50.0071,
        12192
    ],
    [
        -127.469,
        50.0972,
        12192
    ],
    [
        -127.636,
        50.1874,
        12192
    ],
    [
        -127.803,
        50.2762,
        12192
    ],
    [
        -127.973,
        50.3661,
        12192
    ],
    [
        -128.311,
        50.5432,
        12192
    ],
    [
        -128.461,
        50.6208,
        12192
    ],
    [
        -128.733,
        50.7333,
        12192
    ],
    [
        -129.1,
        50.9167,
        12192
    ],
    [
        -129.267,
        51.0167,
        12192
    ],
    [
        -129.433,
        51.0833,
        12192
    ],
    [
        -129.617,
        51.1833,
        12192
    ],
    [
        -129.8,
        51.2667,
        12192
    ],
    [
        -129.983,
        51.3667,
        12192
    ],
    [
        -130.15,
        51.4333,
        12192
    ],
    [
        -130.35,
        51.5333,
        12192
    ],
    [
        -130.533,
        51.6167,
        12192
    ],
    [
        -130.733,
        51.7,
        12192
    ],
    [
        -130.883,
        51.8,
        12192
    ],
    [
        -131.083,
        51.9,
        12192
    ],
    [
        -131.25,
        51.9667,
        12192
    ],
    [
        -131.423,
        52.0484,
        12192
    ],
    [
        -131.65,
        52.1333,
        12192
    ],
    [
        -131.817,
        52.2333,
        12192
    ],
    [
        -132,
        52.3,
        12192
    ],
    [
        -132.183,
        52.3833,
        12192
    ],
    [
        -132.383,
        52.4667,
        12192
    ],
    [
        -132.75,
        52.6667,
        12192
    ],
    [
        -132.95,
        52.75,
        12192
    ],
    [
        -133.133,
        52.8333,
        12192
    ],
    [
        -133.333,
        52.9167,
        12192
    ],
    [
        -133.517,
        52.9667,
        12192
    ],
    [
        -133.733,
        53.05,
        12192
    ],
    [
        -133.917,
        53.1333,
        12192
    ],
    [
        -134.133,
        53.2167,
        12192
    ],
    [
        -134.3,
        53.3167,
        12192
    ],
    [
        -134.5,
        53.4,
        12192
    ],
    [
        -134.917,
        53.5667,
        12192
    ],
    [
        -135.1,
        53.65,
        12192
    ],
    [
        -135.317,
        53.7333,
        12192
    ],
    [
        -135.517,
        53.8,
        12192
    ],
    [
        -135.717,
        53.8833,
        12192
    ],
    [
        -136.017,
        54,
        12192
    ],
    [
        -136.367,
        54.0833,
        12192
    ],
    [
        -136.583,
        54.15,
        12192
    ],
    [
        -136.8,
        54.2167,
        12192
    ],
    [
        -137.033,
        54.2833,
        12192
    ],
    [
        -137.25,
        54.35,
        12192
    ],
    [
        -137.483,
        54.4333,
        12192
    ],
    [
        -137.667,
        54.4833,
        12192
    ],
    [
        -137.9,
        54.5667,
        12192
    ],
    [
        -138.133,
        54.6167,
        12192
    ],
    [
        -138.35,
        54.7,
        12192
    ],
    [
        -138.583,
        54.75,
        12192
    ],
    [
        -138.817,
        54.8333,
        12192
    ],
    [
        -139.05,
        54.8833,
        12192
    ],
    [
        -139.25,
        54.9667,
        12192
    ],
    [
        -139.483,
        55.0167,
        12192
    ],
    [
        -139.717,
        55.0833,
        12192
    ],
    [
        -139.95,
        55.1667,
        12192
    ],
    [
        -140.183,
        55.2167,
        12192
    ],
    [
        -140.417,
        55.2667,
        12192
    ],
    [
        -140.65,
        55.3333,
        12192
    ],
    [
        -140.85,
        55.4167,
        12192
    ],
    [
        -141.083,
        55.4667,
        12192
    ],
    [
        -141.317,
        55.5333,
        12192
    ],
    [
        -141.8,
        55.6333,
        12192
    ],
    [
        -142.05,
        55.7,
        12192
    ],
    [
        -142.283,
        55.75,
        12192
    ],
    [
        -142.483,
        55.8,
        12192
    ],
    [
        -142.733,
        55.8833,
        12192
    ],
    [
        -142.967,
        55.95,
        12192
    ],
    [
        -143.2,
        56,
        12192
    ],
    [
        -143.683,
        56.1167,
        12192
    ],
    [
        -143.933,
        56.1667,
        12192
    ],
    [
        -144.183,
        56.2333,
        12192
    ],
    [
        -144.383,
        56.2667,
        12192
    ],
    [
        -144.633,
        56.3333,
        12192
    ],
    [
        -144.867,
        56.3833,
        12192
    ],
    [
        -145.117,
        56.4333,
        12192
    ],
    [
        -145.367,
        56.4833,
        12192
    ],
    [
        -145.6,
        56.5333,
        12192
    ],
    [
        -145.867,
        56.6,
        12192
    ],
    [
        -146.1,
        56.65,
        12192
    ],
    [
        -146.35,
        56.7,
        12192
    ],
    [
        -146.617,
        56.75,
        12192
    ],
    [
        -146.867,
        56.8,
        12192
    ],
    [
        -147.117,
        56.85,
        12192
    ],
    [
        -147.367,
        56.9,
        12192
    ],
    [
        -147.633,
        56.95,
        12192
    ],
    [
        -147.883,
        57,
        12192
    ],
    [
        -148.133,
        57.0333,
        12192
    ],
    [
        -148.4,
        57.0833,
        12192
    ],
    [
        -148.65,
        57.1333,
        12192
    ],
    [
        -148.917,
        57.1833,
        12192
    ],
    [
        -149.531,
        57.297,
        12192
    ],
    [
        -149.79,
        57.3412,
        12192
    ],
    [
        -150.29,
        57.4248,
        12192
    ],
    [
        -150.562,
        57.4692,
        12192
    ],
    [
        -150.82,
        57.5083,
        12192
    ],
    [
        -151.353,
        57.5872,
        12192
    ],
    [
        -151.617,
        57.6253,
        12192
    ],
    [
        -151.883,
        57.6633,
        12192
    ],
    [
        -152.408,
        57.736,
        12192
    ],
    [
        -152.668,
        57.7713,
        12192
    ],
    [
        -152.928,
        57.8058,
        12192
    ],
    [
        -153.217,
        57.8434,
        12192
    ],
    [
        -153.708,
        57.906,
        12192
    ],
    [
        -153.993,
        57.9412,
        12192
    ],
    [
        -154.293,
        57.9776,
        12192
    ],
    [
        -154.564,
        58.0097,
        12192
    ],
    [
        -154.833,
        58.041,
        12192
    ],
    [
        -155.369,
        58.1015,
        12199.62
    ],
    [
        -155.623,
        58.1293,
        12192
    ],
    [
        -155.884,
        58.1573,
        12192
    ],
    [
        -156.18,
        58.1883,
        12192
    ],
    [
        -156.448,
        58.2158,
        12192
    ],
    [
        -156.582,
        58.2293,
        12192
    ],
    [
        -156.8,
        58.25,
        12192
    ],
    [
        -157.211,
        58.2908,
        12192
    ],
    [
        -157.54,
        58.3216,
        12192
    ],
    [
        -157.767,
        58.3333,
        12192
    ],
    [
        -158.802,
        58.4315,
        12192
    ],
    [
        -159.195,
        58.463,
        12192
    ],
    [
        -159.459,
        58.4835,
        12192
    ],
    [
        -159.738,
        58.5046,
        12192
    ],
    [
        -160.024,
        58.5255,
        12192
    ],
    [
        -160.581,
        58.5644,
        12192
    ],
    [
        -160.861,
        58.583,
        12199.62
    ],
    [
        -161.415,
        58.6178,
        12192
    ],
    [
        -161.889,
        58.6458,
        12192
    ],
    [
        -162.238,
        58.6639,
        12192
    ],
    [
        -162.519,
        58.6762,
        12192
    ],
    [
        -162.802,
        58.6881,
        12192
    ],
    [
        -163.055,
        58.6982,
        12192
    ],
    [
        -163.317,
        58.7,
        12192
    ],
    [
        -163.6,
        58.7167,
        12192
    ],
    [
        -163.883,
        58.7167,
        12192
    ],
    [
        -164.167,
        58.7333,
        12192
    ],
    [
        -164.45,
        58.7333,
        12192
    ],
    [
        -164.717,
        58.75,
        12192
    ],
    [
        -165,
        58.75,
        12192
    ],
    [
        -165.283,
        58.75,
        12192
    ],
    [
        -165.567,
        58.7667,
        12192
    ],
    [
        -165.85,
        58.7667,
        12192
    ],
    [
        -167.867,
        58.7833,
        12192
    ],
    [
        -168.15,
        58.7833,
        12192
    ],
    [
        -168.433,
        58.7833,
        12192
    ],
    [
        -170.383,
        58.7667,
        12192
    ],
    [
        -170.933,
        58.75,
        12192
    ],
    [
        -171.217,
        58.75,
        12192
    ],
    [
        -171.467,
        58.7333,
        12192
    ],
    [
        -171.881,
        58.7193,
        12192
    ],
    [
        -172.296,
        58.7039,
        12192
    ],
    [
        -172.71,
        58.6872,
        12192
    ],
    [
        -173.123,
        58.6692,
        12192
    ],
    [
        -173.949,
        58.6291,
        12192
    ],
    [
        -174.773,
        58.5838,
        12192
    ],
    [
        -175.594,
        58.5332,
        12192
    ],
    [
        -176.421,
        58.5131,
        12192
    ],
    [
        -177.244,
        58.4758,
        12192
    ],
    [
        -178.064,
        58.4332,
        12192
    ],
    [
        -178.883,
        58.3854,
        12192
    ],
    [
        -181.17,
        57.2837,
        13105.1808
    ],
    [
        -181.635,
        57.1268,
        13105.1808
    ],
    [
        -181.972,
        57.0284,
        13105.1808
    ],
    [
        -182.306,
        56.9291,
        13105.1808
    ],
    [
        -182.639,
        56.8289,
        13105.1808
    ],
    [
        -182.97,
        56.7278,
        13105.1808
    ],
    [
        -183.299,
        56.6259,
        13106.400000000001
    ],
    [
        -183.626,
        56.5231,
        13105.1808
    ],
    [
        -183.952,
        56.4194,
        13105.1808
    ],
    [
        -184.276,
        56.3149,
        13105.1808
    ],
    [
        -184.598,
        56.2096,
        13105.1808
    ],
    [
        -184.918,
        56.1034,
        13105.1808
    ],
    [
        -185.355,
        55.9299,
        13105.1808
    ],
    [
        -187.333,
        55.2024,
        13105.1808
    ],
    [
        -188.025,
        54.9322,
        13105.1808
    ],
    [
        -189.157,
        54.3888,
        13105.1808
    ],
    [
        -192.783,
        52.9172,
        0
    ],
    [
        -194.659,
        52.2421,
        13105.1808
    ],
    [
        -195.579,
        51.8905,
        13105.1808
    ],
    [
        -196.147,
        51.6675,
        13106.400000000001
    ],
    [
        -196.879,
        51.3725,
        13106.400000000001
    ],
    [
        -197.408,
        51.154,
        13106.400000000001
    ],
    [
        -197.603,
        51.0725,
        13106.400000000001
    ],
    [
        -197.643,
        51.0553,
        13106.400000000001
    ],
    [
        -198.183,
        50.8167,
        13106.400000000001
    ],
    [
        -199.612,
        50.1945,
        13108.8384
    ],
    [
        -199.793,
        50.1117,
        13105.1808
    ],
    [
        -200.738,
        49.6687,
        13105.1808
    ],
    [
        -206.226,
        46.6864,
        13106.400000000001
    ],
    [
        -207.879,
        45.6566,
        13106.400000000001
    ],
    [
        -213.224,
        41.8517,
        13106.400000000001
    ],
    [
        -213.321,
        41.7754,
        13106.400000000001
    ],
    [
        -213.462,
        41.6652,
        13106.400000000001
    ],
    [
        -213.572,
        41.5785,
        13106.400000000001
    ],
    [
        -213.691,
        41.4844,
        13106.400000000001
    ],
    [
        -213.804,
        41.3951,
        13106.400000000001
    ],
    [
        -213.857,
        41.3524,
        13106.400000000001
    ],
    [
        -214.001,
        41.2374,
        13106.400000000001
    ],
    [
        -214.08,
        41.1741,
        13106.400000000001
    ],
    [
        -214.256,
        41.0324,
        13106.400000000001
    ],
    [
        -214.373,
        40.9378,
        13106.400000000001
    ],
    [
        -214.591,
        40.76,
        13106.400000000001
    ],
    [
        -214.706,
        40.666,
        13106.400000000001
    ],
    [
        -214.814,
        40.5773,
        13106.400000000001
    ],
    [
        -215.03,
        40.398,
        13098.78
    ],
    [
        -215.241,
        40.2221,
        13106.400000000001
    ],
    [
        -215.349,
        40.1318,
        13106.400000000001
    ],
    [
        -215.456,
        40.0419,
        13106.400000000001
    ],
    [
        -215.673,
        39.8579,
        13114.02
    ],
    [
        -215.878,
        39.6839,
        13114.02
    ],
    [
        -216.081,
        39.5095,
        13106.400000000001
    ],
    [
        -216.171,
        39.4256,
        13098.78
    ],
    [
        -216.243,
        39.3028,
        13098.78
    ],
    [
        -216.309,
        39.1802,
        13106.400000000001
    ],
    [
        -216.372,
        39.0609,
        13114.02
    ],
    [
        -216.432,
        38.9484,
        13106.400000000001
    ],
    [
        -216.493,
        38.8314,
        13114.02
    ],
    [
        -216.615,
        38.6005,
        13106.400000000001
    ],
    [
        -216.678,
        38.4798,
        13106.400000000001
    ],
    [
        -216.738,
        38.3633,
        13106.400000000001
    ],
    [
        -216.801,
        38.2432,
        13106.400000000001
    ],
    [
        -216.861,
        38.127,
        13106.400000000001
    ],
    [
        -216.922,
        38.0082,
        13106.400000000001
    ],
    [
        -216.981,
        37.892,
        13106.400000000001
    ],
    [
        -217.041,
        37.776,
        13114.02
    ],
    [
        -217.098,
        37.6646,
        13106.400000000001
    ],
    [
        -217.159,
        37.5439,
        13106.400000000001
    ],
    [
        -217.217,
        37.428,
        13098.78
    ],
    [
        -217.275,
        37.3132,
        13106.400000000001
    ],
    [
        -217.333,
        37.1992,
        13106.400000000001
    ],
    [
        -217.389,
        37.0865,
        13106.400000000001
    ],
    [
        -217.445,
        36.9757,
        13106.400000000001
    ],
    [
        -217.499,
        36.8664,
        13106.400000000001
    ],
    [
        -217.554,
        36.7561,
        12626.34
    ],
    [
        -217.605,
        36.6535,
        12054.84
    ],
    [
        -217.709,
        36.4417,
        10858.5
    ],
    [
        -217.765,
        36.3278,
        10218.42
    ],
    [
        -217.819,
        36.2173,
        9593.58
    ],
    [
        -217.88,
        36.1015,
        8930.640000000001
    ],
    [
        -217.984,
        36.0345,
        8366.76
    ],
    [
        -218.103,
        35.9917,
        7810.5
    ],
    [
        -218.223,
        35.9504,
        7254.240000000001
    ],
    [
        -218.347,
        35.9497,
        6736.08
    ],
    [
        -218.598,
        35.9855,
        6256.02
    ],
    [
        -218.836,
        36.0187,
        5791.200000000001
    ],
    [
        -218.958,
        36.0355,
        5554.9800000000005
    ],
    [
        -219.072,
        36.0513,
        5334
    ],
    [
        -219.191,
        36.0674,
        5105.400000000001
    ],
    [
        -219.308,
        36.0878,
        4876.8
    ],
    [
        -219.419,
        36.1332,
        4693.92
    ],
    [
        -219.534,
        36.1272,
        4229.1
    ],
    [
        -219.632,
        36.1208,
        3771.9
    ],
    [
        -219.721,
        36.1136,
        3352.8
    ],
    [
        -219.787,
        36.0848,
        3345.1800000000003
    ],
    [
        -219.815,
        35.9397,
        2514.6
    ],
    [
        -219.842,
        35.8106,
        2430.78
    ],
    [
        -219.836,
        35.745,
        2430.78
    ],
    [
        -219.817,
        35.6798,
        2263.1400000000003
    ],
    [
        -219.874,
        35.6055,
        1630.68
    ],
    [
        -219.933,
        35.6051,
        1470.66
    ],
    [
        -220.036,
        35.605,
        883.9200000000001
    ],
    [
        -220.089,
        35.6046,
        556.26
    ],
    [
        -220.133,
        35.6042,
        297.18
    ],
    [
        -220.171,
        35.6039,
        297.18
    ],
    [
        -220.217,
        35.5746,
        83.82000000000001
    ]
]
;
		
for(var i= 0; i<line.length;i++)
{
	line[i][2]*= 50
	console.log(line[i][2])
	if(line[i][2]=== 0)
	{
		line[i][2] = line[i-1][2]
	}
	
}
console.log(line)
		

		// console.log('lineGeometries of the lines: ', lines);

		// instantiate threebox

		map.on('style.load', function() {

			map.addLayer({
				id: 'custom_layer',
				type: 'custom',
				onAdd: function(map, mbxContext){

					tb = new Threebox(
						map, 
						mbxContext,
						{defaultLights: true}
					);

					
					var lineOptions = {
						geometry: line,
						color: '#FF00FF', // color based on latitude of endpoint
						width: 1 // random width between 1 and 2
					}

					lineMesh = tb.line(lineOptions);

					tb.add(lineMesh)
					

				},
				
				render: function(gl, matrix){
						tb.update();
				}
                
			});
            // map.setProjection({
            //         name: 'globe'
            //     })
        
            
		});


	</script>
</body>